<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from march4.xacro                   | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!-- Revolute-Revolute Manipulator -->
<robot name="march">
  <!-- Square dimensions (widthxwidth) of beams -->
  <!-- mass = Hip base + HAA actuators -->
  <!-- mass = Moving hip -->
  <!-- mass = KFE joint + HFE joint + Upper leg -->
  <!-- mass = Ankle actuator + Lower leg -->
  <!-- mass = Passive ankle + foot -->
  <!-- rad -->
  <!-- rad -->
  <!-- rad/s -->
  <!--    <xacro:property name="left_ankle_rotation_lower_limit" value="${-26.30401611*pi/180}"/>-->
  <!--    <xacro:property name="left_ankle_rotation_upper_limit" value="${15.88348389*pi/180}"/>-->
  <!-- Space btw top of beam and the each joint -->
  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="gazebo_ros_control">
      <robotNamespace>/march</robotNamespace>
      <robotSimType>gazebo_ros_control/DefaultRobotHWSim</robotSimType>
    </plugin>
  </gazebo>
  <material name="blue">
    <color rgba="0 0 0.6 1"/>
  </material>
  <!-- Used for fixing robot to Gazebo 'base_link' -->
  <link name="world"/>
  <link name="hip_base">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="-0.1395 0 0"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/HipBase.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0.008488999999999997 0.016341 0.147761"/>
      <mass value="8.686"/>
      <inertia ixx="0.141" ixy="3.36e-05" ixz="-0.007" iyy="0.087" iyz="0.0005089" izz="0.091"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.05 0.16 0.05"/>
      </geometry>
    </collision>
  </link>
  <!-- IMU-->
  <link name="imu_link">
    </link>
  <link name="hip_aa_frame_left_side">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="-0.1395 0.08 0"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/LeftHAA.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.085 0"/>
      <geometry>
        <box size="0.05 0.17 0.05"/>
      </geometry>
    </collision>
  </link>
  <link name="hip_aa_frame_left_front">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.03140600000000002 0.05224200000000001 0.029507"/>
      <mass value="2.982"/>
      <inertia ixx="0.013" ixy="-0.008" ixz="0.005" iyy="0.023" iyz="0.001" izz="0.028"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.06975 0 0"/>
      <geometry>
        <box size="0.1395 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <link name="upper_leg_left">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0 0.21 0"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/UpperLeftLeg.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0.000709 -0.005254000000000009 -0.19205"/>
      <mass value="4.995"/>
      <inertia ixx="0.127" ixy="-0.0001291" ixz="-0.0002056" iyy="0.122" iyz="-0.016" izz="0.015"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.1925"/>
      <geometry>
        <box size="0.05 0.05 0.385"/>
      </geometry>
    </collision>
  </link>
  <link name="lower_leg_left">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0 0.21 0.385"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/LowerLeftLeg.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00321 0.025918999999999998 -0.14208200000000004"/>
      <mass value="4.458"/>
      <inertia ixx="0.075" ixy="0.027" ixz="-0.008" iyy="0.11" iyz="0.002" izz="0.071"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.1925"/>
      <geometry>
        <box size="0.05 0.05 0.385"/>
      </geometry>
    </collision>
  </link>
  <link name="ankle_plate_left">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0                                      0.13999999999999999                                      1.0395"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/LeftFoot.stl" scale="1 1 1.35"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.06"/>
      <geometry>
        <box size="0.05 0.05 0.12"/>
      </geometry>
    </collision>
  </link>
  <link name="foot_left">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.028926 -0.015916000000000013 0.10021199999999997"/>
      <mass value="1.821"/>
      <inertia ixx="0.021" ixy="0.002" ixz="0.02" iyy="0.027" iyz="-0.004" izz="0.01"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0625 0 0"/>
      <geometry>
        <box size="0.243 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="foot_left">
    <mu1>1</mu1>
    <mu2>1</mu2>
    <minDepth>0.0005</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>
  <link name="pressure_sole_left">
    <collision>
      <origin rpy="0 0 0" xyz="-0.0625 0 0"/>
      <geometry>
        <box size="0.243 0.05 0.001"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="pressure_sole_left">
    <sensor name="pressure_sole_left" type="contact">
      <always_on>true</always_on>
      <contact collision="ankle_plate_left_fixed_joint_lump__pressure_sole_left_collision_2"/>
      <plugin filename="libgazebo_ros_bumper.so" name="pressure_sole_plugin_left">
        <bumperTopicName>/march/sensor/right_pressure_sole</bumperTopicName>
        <frameName>world</frameName>
      </plugin>
    </sensor>
  </gazebo>
  `

        
  <joint name="pressure_sole_left_joint" type="fixed">
    <parent link="foot_left"/>
    <child link="pressure_sole_left"/>
    <origin rpy="0 0 0" xyz="0 0 -0.025"/>
  </joint>
  <link name="hip_aa_frame_right_side">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="-0.1395 -0.08 0"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/RightHAA.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0.085 0"/>
      <geometry>
        <box size="0.05 0.17 0.05"/>
      </geometry>
    </collision>
  </link>
  <link name="hip_aa_frame_right_front">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.03140600000000002 -0.05224200000000001 0.029507"/>
      <mass value="2.982"/>
      <inertia ixx="0.013" ixy="0.008" ixz="0.005" iyy="0.023" iyz="-0.001" izz="0.028"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.06975 0 0"/>
      <geometry>
        <box size="0.1395 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <link name="upper_leg_right">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0 -0.21 0"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/UpperRightLeg.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="0.000709 0.005254000000000009 -0.19205"/>
      <mass value="4.995"/>
      <inertia ixx="0.127" ixy="0.0001291" ixz="-0.0002056" iyy="0.122" iyz="0.016" izz="0.015"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.1925"/>
      <geometry>
        <box size="0.05 0.05 0.385"/>
      </geometry>
    </collision>
  </link>
  <link name="lower_leg_right">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0 -0.21 0.385"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/LowerRightLeg.stl" scale="1 1 1"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00321 -0.025918999999999998 -0.14208200000000004"/>
      <mass value="4.458"/>
      <inertia ixx="0.075" ixy="-0.027" ixz="-0.008" iyy="0.11" iyz="-0.002" izz="0.071"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.1925"/>
      <geometry>
        <box size="0.05 0.05 0.385"/>
      </geometry>
    </collision>
  </link>
  <link name="ankle_plate_right">
    <visual>
      <origin rpy="0 0 3.141592653589793" xyz="0                                      -0.13999999999999999                                      1.0395"/>
      <geometry>
        <mesh filename="package://march_description/urdf/stl-files/RightFoot.stl" scale="1 1 1.35"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 -0.06"/>
      <geometry>
        <box size="0.05 0.05 0.12"/>
      </geometry>
    </collision>
  </link>
  <link name="pressure_sole_right">
    <collision>
      <origin rpy="0 0 0" xyz="-0.0625 0 0"/>
      <geometry>
        <box size="0.243 0.05 0.001"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="pressure_sole_right">
    <sensor name="pressure_sole_right" type="contact">
      <always_on>true</always_on>
      <contact collision="ankle_plate_right_fixed_joint_lump__pressure_sole_right_collision_2"/>
      <plugin filename="libgazebo_ros_bumper.so" name="pressure_sole_plugin_right">
        <bumperTopicName>/march/sensor/right_pressure_sole</bumperTopicName>
        <frameName>world</frameName>
      </plugin>
    </sensor>
  </gazebo>
  `

        
  <joint name="pressure_sole_right_joint" type="fixed">
    <parent link="foot_right"/>
    <child link="pressure_sole_right"/>
    <origin rpy="0 0 0" xyz="0 0 -0.025"/>
  </joint>
  <link name="foot_right">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.028926 0.015916000000000013 0.10021199999999997"/>
      <mass value="1.821"/>
      <inertia ixx="0.021" ixy="-0.002" ixz="0.02" iyy="0.027" iyz="0.004" izz="0.01"/>
    </inertial>
    <collision>
      <origin rpy="0 0 0" xyz="-0.0625 0 0"/>
      <geometry>
        <box size="0.243 0.05 0.05"/>
      </geometry>
    </collision>
  </link>
  <gazebo reference="foot_right">
    <mu1>1</mu1>
    <mu2>1</mu2>
    <minDepth>0.0005</minDepth>
    <fdir1>1 0 0</fdir1>
  </gazebo>
  <!-- Joints -->
  <joint name="imu_joint" type="fixed">
    <parent link="world"/>
    <child link="imu_link"/>
  </joint>
  <joint name="hip" type="fixed">
    <parent link="imu_link"/>
    <child link="hip_base"/>
    <origin rpy="0 0 0" xyz="0 0 1.215"/>
  </joint>
  <joint name="left_hip_aa" type="revolute">
    <parent link="hip_base"/>
    <child link="hip_aa_frame_left_side"/>
    <origin rpy="0 0 0" xyz="0 -0.08 0"/>
    <axis xyz="-1 0 0"/>
    <limit effort="22932.0" lower="-0.32366994633113677" upper="0.2853204265467293" velocity="1.0"/>
    <safety_controller k_position="4.0" k_velocity="20000.0" soft_lower_limit="-0.26258342251133526" soft_upper_limit="0.22423390272692775"/>
  </joint>
  <joint name="left_hip_angle" type="fixed">
    <parent link="hip_aa_frame_left_side"/>
    <child link="hip_aa_frame_left_front"/>
    <origin rpy="0 0 0" xyz="0 -0.17 0"/>
  </joint>
  <joint name="left_hip_fe" type="revolute">
    <parent link="hip_aa_frame_left_front"/>
    <child link="upper_leg_left"/>
    <origin rpy="0 0 0" xyz="-0.1395 0.04 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="18000.0" lower="-0.3672925248393725" upper="1.7273582408875707" velocity="2.0"/>
    <safety_controller k_position="14.88" k_velocity="20000.0" soft_lower_limit="-0.3149326472795426" soft_upper_limit="1.6749983633277408"/>
  </joint>
  <transmission name="left_hip_fe">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_hip_fe">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator mechanicalReduction="101" name="left_hip_fe_motor"/>
  </transmission>
  <joint name="left_knee" type="revolute">
    <parent link="upper_leg_left"/>
    <child link="lower_leg_left"/>
    <origin rpy="0 0 0" xyz="0 0 -0.385"/>
    <axis xyz="0 -1 0"/>
    <limit effort="18000.0" lower="-0.08748484180855756" upper="1.9621531752496792" velocity="2.5"/>
    <safety_controller k_position="14.88" k_velocity="20000.0" soft_lower_limit="-0.026398317988756026" soft_upper_limit="1.9097932976898493"/>
  </joint>
  <transmission name="left_knee">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_knee">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator mechanicalReduction="101" name="left_knee_motor"/>
  </transmission>
  <!--    <joint name="left_ankle" type="revolute">-->
  <!--        <parent link="lower_leg_left"/>-->
  <!--        <child link="ankle_plate_left"/>-->
  <!--        <origin xyz="0 ${ankle_plate_offset} ${-lower_leg_height}" rpy="0 0 0"/>-->
  <!--        <axis xyz="0 1 0"/>-->
  <!--        <limit velocity="${ankle_velocity_limit}"-->
  <!--               effort="${ankle_effort_limit}"-->
  <!--               lower="${left_ankle_rotation_lower_limit}"-->
  <!--               upper="${left_ankle_rotation_upper_limit}"/>-->
  <!--        <safety_controller soft_lower_limit="${left_ankle_rotation_lower_limit + ankle_plantarflexion_soft_buffer}"-->
  <!--                           soft_upper_limit="${left_ankle_rotation_upper_limit - ankle_dorsalflexion_soft_buffer}"-->
  <!--                           k_position="${k_position_value_adpf}"-->
  <!--                           k_velocity="${k_velocity_value_adpf}" />-->
  <!--    </joint>-->
  <joint name="left_ankle" type="revolute">
    <parent link="lower_leg_left"/>
    <child link="ankle_plate_left"/>
    <origin rpy="0 0 0" xyz="0 0.07 -0.385"/>
    <axis xyz="0 1 0"/>
    <limit effort="22932.0" lower="-0.45909168761713093" upper="0.27721909056797683" velocity="1.0"/>
    <safety_controller k_position="5.0" k_velocity="20000.0" soft_lower_limit="-0.37182522501741444" soft_upper_limit="0.22485921300814696"/>
  </joint>
  <transmission name="left_ankle">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_ankle">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator mechanicalReduction="200" name="left_ankle_motor"/>
  </transmission>
  <joint name="left_foot_angle" type="fixed">
    <parent link="ankle_plate_left"/>
    <child link="foot_left"/>
    <origin rpy="0 0 0" xyz="0 0 -0.12"/>
  </joint>
  <!--    <joint name="right_pressure_sole_joint" type="fixed">-->
  <!--        <parent link="foot_right"/>-->
  <!--        <child link="pressure_sole_right"/>-->
  <!--        <origin xyz="0 0 ${-(width/2)}" rpy="0 0 0"/>-->
  <!--    </joint>-->
  <joint name="right_hip_aa" type="revolute">
    <parent link="hip_base"/>
    <child link="hip_aa_frame_right_side"/>
    <origin rpy="0 0 0" xyz="0 0.08 0"/>
    <axis xyz="1 0 0"/>
    <limit effort="22932.0" lower="-0.31600004230444206" upper="0.2791845033951867" velocity="1.0"/>
    <safety_controller k_position="4.0" k_velocity="20000.0" soft_lower_limit="-0.2549135184846405" soft_upper_limit="0.21809797957538515"/>
  </joint>
  <joint name="right_hip_angle" type="fixed">
    <parent link="hip_aa_frame_right_side"/>
    <child link="hip_aa_frame_right_front"/>
    <origin rpy="0 0 0" xyz="0 0.17 0"/>
  </joint>
  <joint name="right_hip_fe" type="revolute">
    <parent link="hip_aa_frame_right_front"/>
    <child link="upper_leg_right"/>
    <origin rpy="0 0 0" xyz="-0.1395 -0.04 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="18000.0" lower="-0.3531511394374164" upper="1.7362745042553351" velocity="2.0"/>
    <safety_controller k_position="14.88" k_velocity="20000.0" soft_lower_limit="-0.3007912618775865" soft_upper_limit="1.6839146266955052"/>
  </joint>
  <transmission name="right_hip_fe">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_hip_fe">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator mechanicalReduction="101" name="right_hip_fe_motor"/>
  </transmission>
  <joint name="right_knee" type="revolute">
    <parent link="upper_leg_right"/>
    <child link="lower_leg_right"/>
    <origin rpy="0 0 0" xyz="0 0 -0.385"/>
    <axis xyz="0 -1 0"/>
    <limit effort="18000.0" lower="-0.0854235551308358" upper="2.012534856492726" velocity="2.5"/>
    <safety_controller k_position="14.88" k_velocity="20000.0" soft_lower_limit="-0.024337031311034263" soft_upper_limit="1.9601749789328962"/>
  </joint>
  <transmission name="right_knee">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_knee">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator mechanicalReduction="101" name="right_knee_motor"/>
  </transmission>
  <joint name="right_ankle" type="revolute">
    <parent link="lower_leg_right"/>
    <child link="ankle_plate_right"/>
    <origin rpy="0 0 0" xyz="0 -0.07 -0.385"/>
    <axis xyz="0 1 0"/>
    <limit effort="22932.0" lower="-0.4049709280018093" upper="0.24850488763747386" velocity="1.0"/>
    <safety_controller k_position="5.0" k_velocity="20000.0" soft_lower_limit="-0.3526110504419794" soft_upper_limit="0.16123842503775737"/>
  </joint>
  <joint name="right_foot_angle" type="fixed">
    <parent link="ankle_plate_right"/>
    <child link="foot_right"/>
    <origin rpy="0 0 0" xyz="0 0 -0.12"/>
  </joint>
  <!-- ROS Control plugin for Gazebo -->
  <transmission name="left_hip_aa">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="left_hip_aa">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="left_hip_aa_motor">
      <mechanicalReduction>200</mechanicalReduction>
    </actuator>
  </transmission>
  <!--    <transmission name="left_ankle">-->
  <!--        <type>transmission_interface/SimpleTransmission</type>-->
  <!--        <joint name="left_ankle">-->
  <!--            <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>-->
  <!--        </joint>-->
  <!--        <actuator name="left_ankle_motor">-->
  <!--            <mechanicalReduction>200</mechanicalReduction>-->
  <!--        </actuator>-->
  <!--    </transmission>-->
  <transmission name="right_hip_aa">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_hip_aa">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="right_hip_aa_motor">
      <mechanicalReduction>200</mechanicalReduction>
    </actuator>
  </transmission>
  <transmission name="right_ankle">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="right_ankle">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
    <actuator name="right_ankle_motor">
      <mechanicalReduction>200</mechanicalReduction>
    </actuator>
  </transmission>
</robot>
